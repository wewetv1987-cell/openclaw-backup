# Prompt 优化技巧

> 学习时间: 2026-02-17 05:00
> 来源: Claude Prompt Engineering 官方文档

## 核心原则

### 1. 清晰直接 (Be Clear and Direct)
- 明确说明任务目标和成功标准
- 避免模糊不清的指令
- 使用具体而非抽象的描述

### 2. 使用示例 (Multishot Prompting)
- 提供 3-5 个多样化、相关的示例
- 示例应覆盖边缘情况
- 使用 `<example>` 标签结构化示例

**为什么有效：**
- 准确性：减少对指令的误解
- 一致性：强制统一的结构和风格
- 性能：精心选择的示例提升复杂任务处理能力

**示例对比：**
```
# 无示例
分析客户反馈并分类...

# 有示例
分析客户反馈并分类。示例：
<example>
输入: 新仪表板太乱了！加载很慢，找不到导出按钮。
分类: UI/UX, 性能
情感: 负面
优先级: 高
</example>
```

### 3. 思维链 (Chain of Thought)
让 AI 分步骤思考，显著提升复杂任务的准确性。

**三个层次：**

| 层次 | 方法 | 适用场景 |
|-----|------|---------|
| 基础 | "一步一步思考" | 简单任务 |
| 引导 | 列出具体步骤 | 特定流程 |
| 结构化 | 使用 XML 标签 | 需要分离思考与答案 |

**结构化思维链模板：**
```xml
<用户提示>
在 <thinking> 标签中思考：
1. 分析 X 的因素
2. 考虑 Y 的影响
3. 评估 Z 的风险
然后在 <answer> 标签中给出最终答案
</用户提示>
```

**优势：**
- 准确性：减少数学、逻辑、分析中的错误
- 连贯性：结构化思考产生更有条理的输出
- 调试性：可见的思考过程帮助定位问题

### 4. 使用 XML 标签
- `<context>` - 背景信息
- `<instructions>` - 具体指令
- `<example>` - 示例
- `<thinking>` - 思考过程
- `<answer>` - 最终答案

### 5. 角色设定 (System Prompts)
给 AI 一个专业角色，提升输出质量：
```
你是一位资深软件架构师，专注于...
```

### 6. 复杂任务链式分解
将复杂任务分解为多个简单提示：
1. 先分析需求
2. 再设计方案
3. 最后实现代码

---

## Vibe Coding 专用优化技巧

### 代码生成 Prompt 模式

#### 1. 需求描述模式
```
创建一个 [功能描述]
- 技术栈: [语言/框架]
- 主要功能: [列表]
- 边界情况: [处理方式]
```

#### 2. 迭代优化模式
```
审查以下代码:
<code>
{代码}
</code>

改进建议:
1. 性能优化
2. 代码风格
3. 错误处理
```

#### 3. 调试模式
```
这段代码报错: {错误信息}

代码:
<code>
{代码}
</code>

请分析原因并提供修复方案。
```

---

## Prompt vs 微调

| 维度 | Prompt Engineering | 微调 |
|-----|-------------------|------|
| 资源效率 | 仅需文本输入 | 需要高端 GPU |
| 成本 | 使用基础模型 | 显著更高 |
| 时间 | 即时结果 | 数小时到数天 |
| 数据需求 | 少量/零样本 | 大量标注数据 |
| 灵活性 | 快速迭代 | 重新训练 |
| 透明度 | 人类可读 | 黑盒 |

**结论**: 优先使用 Prompt Engineering，它是更快、更便宜、更灵活的方案。

---

## 最佳实践清单

- [ ] 明确任务目标和成功标准
- [ ] 提供 3-5 个多样化示例
- [ ] 复杂任务要求分步骤思考
- [ ] 使用 XML 标签结构化输入/输出
- [ ] 设定专业角色
- [ ] 复杂任务分解为链式提示
- [ ] 包含边界情况处理指令
- [ ] 指定输出格式

---

## 常见错误

1. **指令过于模糊** - AI 无法确定具体需求
2. **缺少示例** - 输出格式不一致
3. **任务过于复杂** - 应该分解
4. **忽略边界情况** - 导致异常处理不足
5. **没有指定输出格式** - 结果不符合预期

---

*学习来源: Anthropic Claude 官方文档*
